<page-header model="navModel"></page-header>

<div class="page-container page-body">
	<div class="signup">
		<h3 class="p-b-1">重設密碼</h3>

		<div ng-if="ldapEnabled || authProxyEnabled">
      啟用 LDAP 或 Auth Proxy 身份驗證時，您無法重置密碼。
		</div>
		<div ng-if="disableLoginForm">
      當登錄表單被禁用時，您無法重置密碼。
		</div>
		<form name="sendResetForm" class="login-form gf-form-group" ng-show="mode === 'send'" ng-hide="ldapEnabled || authProxyEnabled || disableLoginForm || mode === 'reset'">
			<div class="gf-form">
					<span class="gf-form-label width-7">使用者</span>
					<input type="text" name="用戶名" class="gf-form-input max-width-14" required ng-model='formModel.userOrEmail' placeholder="電子郵件或用戶名">
			</div>
			<div class="gf-form-button-row">
				<button type="submit" class="btn btn-primary" ng-click="sendResetEmail();" ng-disabled="!sendResetForm.$valid">
					重設密碼
				</button>
				<a href="login" class="btn btn-inverse">
					返回
				</a>

			</div>
		</form>
		<div ng-show="mode === 'email-sent'">
      一封帶有重置鏈接的電子郵件已發送到該電子郵件地址。<br>
      您應該很快就會收到。
			<div class="p-t-1">
				<a href="login" class="btn btn-primary p-t-1">
					登入
				</a>
			</div>
		</div>
		<form name="resetForm" class="login-form gf-form-group" ng-show="mode === 'reset'">
			<div class="gf-form">
				<span class="gf-form-label width-9">新密碼</span>
				<input type="password" name="新密碼" class="gf-form-input max-width-14" required ng-minlength="4" ng-model='formModel.newPassword' placeholder="密碼" watch-change="formModel.newPassword = inputValue;">
			</div>
			<div class="gf-form">
				<span class="gf-form-label width-9">確認密碼</span>
				<input type="password" name="確認密碼" class="gf-form-input max-width-14" required ng-minlength="4" ng-model='formModel.confirmPassword' placeholder="確認密碼">
			</div>
			<div class="signup__password-strength">
				<password-strength password="formModel.newPassword"></password-strength>
			</div>
			<div class="gf-form-button-row">
				<button type="submit" class="btn btn-primary" ng-click="submitReset();" ng-disabled="!resetForm.$valid">
          重設密碼
				</button>
			</div>
		</form>
	</div>
</div>

<footer />
